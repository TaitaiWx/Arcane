# 📄 Arcane 项目经纪文档 (Jetpack Compose Desktop)

## ✨ 1. 项目实现目标

Arcane 是一个基于 **Jetpack Compose for Desktop** 的跨平台高质量环绕 UI 规划的解压缩工具。其目标是托管 JVM 和 Compose 的方便性和最新 UI 技术，实现一个集成规范、环境简洁、操作简单的完整框架。

## ✅ 2. 最终实现功能

### 基础功能

* 支持解压缩格式：

  * `.zip`
  * `.7z`
  * `.rar`
  * `.tar.gz`
* 拖拽文件规范区域，支持 drag & drop
* 文件树结构显示，选择解压文件/目录
* 弹窗提示解压输出路径
* 解压进度条、弹性展示应用状态

### 产品经验

* 环绕 UI设计，高 DPI 适配
* 主题切换：依照系统模式切换暗黑/光明
* 动画效果：动态合成、入场效果
* 自动检测压缩包类型
* 支持多选下载

### 构建/发行

* 使用 Gradle (随附 gradlew) 管理
* 支持 Dev 热更新模式：`./gradlew run`
* 支持 release 打包模式：`./gradlew package` 用于发布 `.dmg`, `.exe`, `.AppImage`

## ✍️ 3. 项目技术标准

| 项    | 配置                                                                    |
| ---- | --------------------------------------------------------------------- |
| 跨平台  | macOS / Windows / Linux                                               |
| UI框架 | Jetpack Compose for Desktop (Skia)                                    |
| 压缩解压 | `java.util.zip` + Apache Commons Compress / sevenzipjbinding / junrar |
| 构建管理 | Gradle (Kotlin DSL) + gradlew                                         |
| 开发模式 | `./gradlew run` 快速启动                                                  |
| 生产打包 | `./gradlew package` 输出应用                                              |

## 📌 4. TODO 任务分期规划

### 第一期 (MVP v0.1) — 最小可行性版

> 目标：培基础框架，支持 zip 解压 + 文件树结构显示

#### ✅ TODO

* [x] 配置 gradlew，支持 `./gradlew run`
* [x] 实现基础页面结构：顶部栏 + 中央 Canvas + 左侧文件树
* [x] 支持拖拽 zip 文件到窗口即解析（通过文件选择器实现）
* [x] 用 Java zip 进行解压 + 列表文件树
* [x] 简单的解压操作：按钮解压到指定目录
* [x] UI 使用 Material 3 设计风格
* [x] 支持暗黑/光明主题切换
* [x] 样式要好看
  * [x] 程序的 header 使用自定义设计，现代化风格
  * [x] 里面布局无 gap，具备现代 UI 的设计质感，偏向暗黑模式，突出重点
  * [x] 渐变背景和动画效果
  * [x] 现代化的错误提示 Toast 风格

### 第二期 (v0.2) — 多格式支持 + 进度条 + 动画

> 目标：解压格式增加，成功后动画、状态优化

#### ✅ TODO

* [x] 集成 Apache Commons Compress 支持 tar.gz
* [x] 集成 `sevenzipjbinding` 支持 .7z
* [x] 集成 `junrar` 支持 .rar
* [x] 解压动画：用户启动后显示 loading
* [x] 解压进度条显示
* [x] 优化拖拽体验 + 错误报告 (toasts)
* [x] 现代化 UI 设计：渐变背景、动画效果、无间隙布局

### 第三期 (v1.0) — 发行版 / 用户用于生产

> 目标：完善产品化，打包成完整应用

#### ✅ TODO

* [x] 使用 `./gradlew package` 打包 mac `.app`, Windows `.exe`, Linux `.AppImage` (已配置)
* [x] 配置系统符号、应用名 + icon (已配置基础设置)
* [x] 支持应用启动时选择输出文件夹 (已实现文件夹选择)
* [x] 实现现代化 UI 设计和布局重构
* [x] 自定义窗口标题栏，移除系统默认标题栏
* [x] 创建侧边栏导航系统
* [x] 优化主面板设计，采用卡片式布局
* [x] 实现窗口拖拽功能
* [x] 实现最小化、最大化、关闭功能
* [x] 创建现代化文件选择器替代Swing
* [x] 实现设置对话框
* [x] 修复编译错误和语法问题，确保项目可正常构建运行
* [x] 优化组件接口和类型安全性
* [x] 修复窗口拖动抖动问题，优化拖动体验
* [x] 替换所有Swing组件为现代化Compose实现
* [x] 实现生产级别的窗口控制功能
* [x] 完善设置功能，包含输出目录、解压选项等完整配置
* [x] 重新设计UI布局，符合现代化设计规范
* [x] 实现左侧文件列表+右侧预览+底部操作按钮的布局
* [x] 集成设置功能到主界面，实现设置的实际应用
* [x] 文件预览功能基础实现
* [ ] 实现高级文件预览 (图片预览、文本内容预览)
* [ ] 支持多文件同时操作


### 第四期

* [ ] 创建 GitHub CI/CD，自动化构建的 github actions
* [ ] 配置 macOS 签名/证书打包
